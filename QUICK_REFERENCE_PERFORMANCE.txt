
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     âš¡ DNS PERFORMANCE OPTIMIZATION - QUICK REFERENCE CARD                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š CURRENT PERFORMANCE LIMITS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Global QPS Limit:          50,000 queries/second
Per-IP QPS Limit:          1,000 queries/second  
Per-Domain (.COM/.NET):    5,000 queries/second
CPU Threads:               8 cores (100% utilization)
Cache Size:                100,000 DNS entries
Concurrent Queries:        10,000 upstream connections


ğŸ” QUICK DIAGNOSTIC COMMANDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Check Global QPS:
  grep "ratelimit:" /etc/unbound/unbound.conf.d/smartdns.conf

Check Per-IP Limit:
  grep "ip-ratelimit:" /etc/unbound/unbound.conf.d/smartdns.conf

Check Thread Count:
  grep "num-threads:" /etc/unbound/unbound.conf.d/smartdns.conf

Check Cache Size:
  grep "cache-size=" /etc/dnsmasq.d/00-base.conf

View Real-time Queries:
  tail -f /var/log/dnsmasq.log | grep "query"

Top Talkers (by IP):
  sudo tail -n 50000 /var/log/dnsmasq.log | grep query | awk '{print $6}' | \
    cut -d'#' -f1 | sort | uniq -c | sort -rn | head -20

Check Per-IP Traffic (via Web GUI):
  curl -s http://localhost:5000/api/traffic/per-ip | python3 -m json.tool


âš™ï¸ CONFIGURATION FILES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Unbound Config:
  /etc/unbound/unbound.conf.d/smartdns.conf
  /home/dns/unbound_smartdns.conf (template)

Dnsmasq Config:
  /etc/dnsmasq.d/00-base.conf
  /home/dns/dnsmasq_base.conf (template)

Web GUI:
  /home/dns/web_gui/app.py
  API endpoint: GET /api/traffic/per-ip


ğŸš€ MONITORING & PERFORMANCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Monitor Real-time QPS:
  watch -n 1 'tail -n 1000 /var/log/dnsmasq.log | grep query | wc -l'

Monitor Per-IP Connections:
  watch -n 2 'sudo netstat -an | grep :53 | wc -l'

Check CPU Usage:
  watch -n 1 'ps aux | grep unbound | grep -v grep'

Check Memory Usage:
  watch -n 1 'free -m'

Monitor Service Status:
  systemctl status unbound dnsmasq


ğŸ’¾ BACKUP & SAFETY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Backup Location:
  /home/dns/backups/performance_tuning_20260209_153205/

Contains:
  - smartdns.conf.bak (original unbound config)
  - 00-base.conf.bak (original dnsmasq config)

Quick Rollback (30 seconds):
  sudo cp /home/dns/backups/performance_tuning_*/smartdns.conf.bak \
     /etc/unbound/unbound.conf.d/smartdns.conf
  sudo cp /home/dns/backups/performance_tuning_*/00-base.conf.bak \
     /etc/dnsmasq.d/00-base.conf
  sudo systemctl restart unbound dnsmasq


ğŸ“ˆ PERFORMANCE EXPECTATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Idle (No Queries):
  Response Time: 5-10ms
  CPU Usage: 2-5%
  Memory: 150-200MB

Light Load (5-10K QPS):
  Response Time: 10-30ms
  CPU Usage: 10-30%
  Cache Hit: 75-85%

Heavy Load (25-50K QPS):
  Response Time: 20-50ms
  CPU Usage: 60-80%
  Cache Hit: 60-75%

Sustained Max (50K QPS):
  Response Time: 30-50ms
  CPU Usage: 80-95%
  Cache Hit: 55-70%


ğŸ¯ TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

High CPU (>95%):
  â†’ Check for DDoS attack: see top talkers
  â†’ Reduce ratelimit if needed
  â†’ Check for cache miss storms

High Memory:
  â†’ Monitor /var/log/dnsmasq.log size
  â†’ Rotate logs if needed: sudo logrotate /etc/logrotate.d/dnsmasq

Slow Response (>100ms):
  â†’ Check cache hit rate
  â†’ Look for network latency issues
  â†’ Check upstream DNS servers

Queries Being Dropped:
  â†’ Check rate-limit status
  â†’ Per-IP may be hitting 1000 QPS limit
  â†’ Domain limit (5000 QPS) may be hit


ğŸ“ DOCUMENTATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Detailed Report:
  cat /home/dns/PERFORMANCE_OPTIMIZATION_REPORT.md

Bug Fixes:
  cat /home/dns/BUG_FIX_SCHEDULE_SYNC.md

100Gbps Analysis:
  cat /home/dns/ANALISIS_PERFORMA_100GBPS.md


âœ… SYSTEM STATUS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Unbound: ACTIVE
âœ… Dnsmasq: ACTIVE
âœ… Flask GUI: ACTIVE
âœ… Guardian: ACTIVE
âœ… All Services: HEALTHY


Last Updated: 2026-02-09 15:35 UTC
Status: ğŸŸ¢ PRODUCTION READY

