<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 40px; }
        h1, h2, h3 { color: #0046ad; }
        h1 { border-bottom: 2px solid #e31e24; padding-bottom: 10px; text-align: center; }
        .cover { text-align: center; padding: 100px 0; border: 5px solid #0046ad; margin-bottom: 50px; }
        .feature-box { background: #f4f7f9; border-left: 5px solid #0046ad; padding: 15px; margin: 20px 0; }
        code { background: #eee; padding: 2px 5px; border-radius: 3px; font-family: 'Courier New', Courier, monospace; }
        pre { background: #2d2d2d; color: #ccc; padding: 15px; border-radius: 5px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #0046ad; color: white; }
        .footer { text-align: center; margin-top: 50px; font-size: 0.8em; color: #777; }
        .page-break { page-break-after: always; }
    </style>
    <title>Buku Panduan Sistem DNS MARS DATA</title>
</head>
<body>
    <div class="cover">
        <h1>BUKU PANDUAN SISTEM<br>INTELLIGENT DNS MANAGEMENT</h1>
        <h2 style="color: #e31e24;">PT MARS DATA TELEKOMUNIKASI</h2>
        <p>Versi 2.0 - Februari 2026</p>
        <p><i>Security, Speed, and Reliability</i></p>
    </div>

    <div class="page-break"></div>

    <h2>1. Pendahuluan</h2>
    <p>Sistem DNS MARS DATA adalah solusi manajemen DNS tingkat lanjut yang dirancang untuk infrastruktur ISP dan Enterprise. Sistem ini menggabungkan kecepatan resolusi DNS dengan lapisan keamanan berlapis untuk melindungi pengguna dari ancaman siber dan serangan DDoS.</p>

    <h2>2. Arsitektur Sistem (Hybrid DNS)</h2>
    <p>Sistem ini menggunakan pendekatan <b>Hybrid</b> untuk memaksimalkan performa:</p>
    <ul>
        <li><b>Dnsmasq (Frontend):</b> Menangani caching cepat, manajemen whitelist/blacklist, dan filtering domain malware.</li>
        <li><b>Unbound (Backend):</b> Bertindak sebagai <i>Recursive Resolver</i> yang aman dengan dukungan DNSSEC, memastikan validitas data DNS dari root server.</li>
    </ul>
    <div class="feature-box">
        <strong>Alur Query:</strong><br>
        Client &rarr; Dnsmasq (Cache Check) &rarr; Unbound (Recursive Lookup) &rarr; Internet
    </div>

    <h2>3. Keamanan & Proteksi (Guardian Engine)</h2>
    <p><b>Guardian.py</b> adalah jantung dari sistem penyembuhan mandiri (self-healing) dan deteksi serangan:</p>
    <ul>
        <li><b>Deteksi Flood:</b> Memantau log secara real-time untuk mendeteksi anomali query (DDoS).</li>
        <li><b>Auto-Banning:</b> Secara otomatis memblokir IP penyerang melalui <code>iptables</code> jika melewati ambang batas 1.500 QPS.</li>
        <li><b>Self-Healing:</b> Memantau status layanan <code>dnsmasq</code> dan <code>unbound</code>. Jika layanan mati, Guardian akan melakukan perbaikan dan restart otomatis.</li>
    </ul>

    <h2>4. Firewall & Network Hardening</h2>
    <p>Konfigurasi <code>setup_firewall.sh</code> menerapkan aturan keamanan ketat:</p>
    <table>
        <tr>
            <th>Fitur</th>
            <th>Deskripsi</th>
        </tr>
        <tr>
            <td>Anti-DDoS UDP</td>
            <td>Membatasi query DNS maksimal 1.500 QPS per IP menggunakan <code>hashlimit</code>.</td>
        </tr>
        <tr>
            <td>NAT Interception</td>
            <td>Memaksa semua trafik port 53 untuk masuk ke server lokal (mencegah bypass DNS).</td>
        </tr>
        <tr>
            <td>Access Control List (ACL)</td>
            <td>Hanya IP/Subnet di <code>whitelist.conf</code> yang bisa mengakses SSH (22) dan Web GUI (5000).</td>
        </tr>
    </table>

    <h2>5. Manajemen Web GUI</h2>
    <p>Dashboard modern berbasis Flask menyediakan kontrol penuh:</p>
    <ul>
        <li><b>Monitoring Real-time:</b> Grafik trafik query dan status layanan.</li>
        <li><b>Global Whitelist:</b> Antarmuka untuk menambah IP/Subnet terpercaya tanpa perlu restart manual.</li>
        <li><b>Security Logs:</b> Melihat riwayat serangan dan aktivitas sistem.</li>
    </ul>

    <h2>6. Internet Positif & Captive Portal</h2>
    <p>Sistem ini mendukung regulasi konten dan pengalaman pengguna mobile:</p>
    <ul>
        <li><b>Halaman Blokir:</b> Tampilan kustom PT MARS DATA untuk domain yang dilarang.</li>
        <li><b>Redirect HTTP (302):</b> Pengalihan otomatis untuk akses HTTP yang lebih cepat ke halaman blokir.</li>
        <li><b>Popup Android/iOS:</b> Memicu notifikasi "Sign in to network" pada perangkat mobile saat mencoba mengakses situs terblokir melalui teknik <i>Captive Portal Detection</i>.</li>
    </ul>

    <div class="footer">
        &copy; 2026 PT MARS DATA TELEKOMUNIKASI. Seluruh hak cipta dilindungi.
    </div>
</body>
</html>
